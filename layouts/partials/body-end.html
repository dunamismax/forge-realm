<script>
  // Subtle reveal-on-scroll animations and auto-mark elements
  ;(function () {
    var reduceMotion = false
    try {
      reduceMotion =
        window.matchMedia &&
        window.matchMedia("(prefers-reduced-motion: reduce)").matches
    } catch (e) {}

    function markDefaultRevealTargets() {
      try {
        var selectors = [
          ".reveal-on-scroll",
          ".blocks-feature .card",
          ".card",
          ".pageinfo",
          ".alert",
          ".td-cover .container > *",
        ]
        var nodes = document.querySelectorAll(selectors.join(","))
        nodes.forEach(function (el) {
          el.classList.add("reveal-on-scroll")
        })
      } catch (e) {}
    }

    function initRevealObserver() {
      if (reduceMotion) return // honor user preference

      var items = document.querySelectorAll(".reveal-on-scroll")
      if (!("IntersectionObserver" in window) || !items.length) {
        // Fallback: make visible immediately
        items.forEach(function (el) {
          el.classList.add("is-visible")
        })
        return
      }

      var io = new IntersectionObserver(
        function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible")
              io.unobserve(entry.target)
            }
          })
        },
        { rootMargin: "0px 0px -10% 0px", threshold: 0.1 }
      )

      items.forEach(function (el) {
        io.observe(el)
      })
    }

    document.addEventListener("DOMContentLoaded", function () {
      markDefaultRevealTargets()
      initRevealObserver()
    })
  })()
</script>
