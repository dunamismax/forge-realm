@import "tailwindcss" prefix(hx);

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --color-primary-50: hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) + calc(calc(100% - var(--primary-lightness)) / 50) * 47));
  --color-primary-100: hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) + calc(calc(100% - var(--primary-lightness)) / 50) * 44));
  --color-primary-200: hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) + calc(calc(100% - var(--primary-lightness)) / 50) * 36));
  --color-primary-300: hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) + calc(calc(100% - var(--primary-lightness)) / 50) * 27));
  --color-primary-400: hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) + calc(calc(100% - var(--primary-lightness)) / 50) * 16));
  --color-primary-500: hsl(var(--primary-hue) var(--primary-saturation) var(--primary-lightness));
  --color-primary-600: hsl(var(--primary-hue) var(--primary-saturation) calc(calc(var(--primary-lightness) / 50) * 45));
  --color-primary-700: hsl(var(--primary-hue) var(--primary-saturation) calc(calc(var(--primary-lightness) / 50) * 39));
  --color-primary-800: hsl(var(--primary-hue) var(--primary-saturation) calc(calc(var(--primary-lightness) / 50) * 32));
  --color-primary-900: hsl(var(--primary-hue) var(--primary-saturation) calc(calc(var(--primary-lightness) / 50) * 24));
  --color-dark: #111;
}

html {
  @apply hx:text-base hx:antialiased;
  background-color: #111 !important;
  color: #f3f4f6;
}

body {
  @apply hx:w-full hx:dark:bg-dark hx:dark:text-gray-100;
  background-color: #111 !important;
  color: #f3f4f6;
  transition: none !important;
}

/* SPA-like page transitions */
.page-transition {
  transition: opacity 0.15s ease-out, transform 0.15s ease-out;
}

.page-transition.page-entering {
  opacity: 0;
  transform: translateY(8px);
}

.page-transition.page-entered {
  opacity: 1;
  transform: translateY(0);
}

.page-transition.page-exiting {
  opacity: 0;
  transform: translateY(-4px);
}

/* Instant background color to prevent flash */
* {
  background-color: inherit;
}

/* Critical CSS for instant dark mode */
main, article, section, div {
  background-color: transparent;
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
  .page-transition {
    transition: opacity 0.1s ease-out;
  }
  
  body {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
}

:root {
  --primary-hue: 212deg;
  --primary-saturation: 100%;
  --primary-lightness: 50%;
  --navbar-height: 4rem;
  --menu-height: 3.75rem; /* 60px */
  
  /* Ideal Magic Design System */
  --fr-timing-fast: 0.15s;
  --fr-timing-normal: 0.25s;
  --fr-timing-slow: 0.4s;
  --fr-easing-standard: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --fr-easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  
  /* MTG Mana Colors */
  --fr-mana-green: #006533;
  --fr-mana-blue: #264490;
  --fr-mana-white: #E49506;
  --fr-mana-red: #7E011E;
  --fr-mana-black: #420161;
  
  /* Theme Colors */
  --fr-accent-primary: #3E2977;
  --fr-accent-secondary: #70281A;
  
  /* Typography */
  --fr-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --fr-font-family-mono: 'JetBrains Mono', 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace;
  
  /* Responsive Navigation Heights */
  --fr-nav-height-mobile: 3.5rem;
  --fr-nav-height-tablet: 4rem;
  --fr-nav-height-desktop: 5rem;
  
  /* Performance optimizations */
  --fr-gpu-acceleration: translateZ(0);
  --fr-will-change: transform, opacity;
  
  /* Instant transition timing for mobile */
  --fr-mobile-transition: 0.1s ease-out;
  --fr-desktop-transition: 0.15s ease-out;
}

.dark {
  --primary-hue: 204deg;
  --primary-saturation: 100%;
  --primary-lightness: 50%;
}

@import "./typography.css";
@import "./highlight.css";
@import "./components/cards.css";
@import "./components/steps.css";
@import "./components/search.css";
@import "./components/sidebar.css";
@import "./components/navbar.css";
@import "./components/scrollbar.css";
@import "./components/code-copy.css";
@import "./components/hextra/feature-grid.css";
@import "./components/jupyter.css";
@import "./components/badge.css";
@import "./components/toc.css";
@import "./components/ideal-magic.css";
@import "./components/spa-optimizations.css";
