/* Forge Realm - Typography & Smooth Transitions (refined) */

/* Optional font import (kept but non-blocking) */
@import url('https://cdnjs.cloudflare.com/ajax/libs/inter-ui/4.0.2/inter.css');

/* CSS Variables for consistent theming (non-invasive) */
:root {
  --transition-duration: 0.2s;
  --transition-easing: ease;
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --text-primary: #111827;
  --text-secondary: #374151;
  --text-muted: #6b7280;
  --border-color: #e5e7eb;
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --font-size-base: 15px;
  --line-height-base: 1.6;
}

.dark {
  --bg-primary: #111;
  --bg-secondary: #1f2937;
  --text-primary: #f9fafb;
  --text-secondary: #e5e7eb;
  --text-muted: #9ca3af;
  --border-color: #374151;
}

/* Smooth transitions for interactive elements only */
a, button, .btn, .hx-btn {
  transition: color var(--transition-duration) var(--transition-easing),
              background-color var(--transition-duration) var(--transition-easing),
              border-color var(--transition-duration) var(--transition-easing),
              box-shadow var(--transition-duration) var(--transition-easing),
              transform var(--transition-duration) var(--transition-easing);
}

/* Typography and rendering optimization */
html {
  scroll-behavior: smooth;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-size: var(--font-size-base);
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  font-display: swap;
  font-weight: 400;
}

/* Scope gentle text adjustments to prose/content only */
.hx-prose :where(p, li, span, div) {
  color: var(--text-primary);
}

/* Headings typography */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family);
  font-weight: 600;
  line-height: 1.3;
  text-rendering: optimizeLegibility;
  font-display: swap;
}

/* Ensure headings are visible in content areas */
main :where(h1, h2, h3, h4, h5, h6),
article :where(h1, h2, h3, h4, h5, h6) {
  color: var(--text-primary);
}

h1 { font-size: 2.25rem; }
h2 { font-size: 1.875rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.25rem; }
h5 { font-size: 1.125rem; }
h6 { font-size: 1rem; }

/* Smooth navbar transitions */
.navbar {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transition: background-color var(--transition-duration) var(--transition-easing),
              backdrop-filter var(--transition-duration) var(--transition-easing);
}

/* Enhanced link hover effects */
a:hover {
  transform: translateY(-1px);
}

/* Smooth card hover effects */
.card, .hx-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover, .hx-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.dark .card:hover, .dark .hx-card:hover {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

/* Theme toggle smooth animation */
.theme-toggle {
  transition: transform 0.2s ease, background-color 0.2s ease;
}

.theme-toggle:hover {
  transform: scale(1.05);
}

/* Improved focus states for accessibility */
*:focus {
  outline: 2px solid hsl(var(--primary-hue) var(--primary-saturation) var(--primary-lightness));
  outline-offset: 2px;
  transition: outline 0.15s ease;
}

/* Optimize image loading */
img {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Hero section smooth animations - only on initial load */
.hero-section {
  animation: fadeInUp 0.8s ease 0.2s both;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Feature grid staggered animations - only on initial load */
.feature-grid .feature-card {
  animation: fadeInUp 0.6s ease both;
}

.feature-grid .feature-card:nth-child(1) { animation-delay: 0.1s; }
.feature-grid .feature-card:nth-child(2) { animation-delay: 0.2s; }
.feature-grid .feature-card:nth-child(3) { animation-delay: 0.3s; }
.feature-grid .feature-card:nth-child(4) { animation-delay: 0.4s; }
.feature-grid .feature-card:nth-child(5) { animation-delay: 0.5s; }
.feature-grid .feature-card:nth-child(6) { animation-delay: 0.6s; }

/* Button hover effects */
.btn:hover, .hx-btn:hover, button:hover, a[role="button"]:hover {
  transform: translateY(-1px);
}

/* Respect theme-provided button colors; no global overrides here. */

/* Performance optimizations */
.content-wrapper {
  contain: layout style paint;
}

/* Additional typography fixes */
blockquote, 
.blockquote,
.callout,
.alert {
  color: var(--text-primary);
}

/* Do not override all anchors; scope link styling to content areas only */
.hx-prose a {
  color: hsl(var(--primary-hue) var(--primary-saturation) var(--primary-lightness));
  text-decoration: underline;
}
.hx-prose a:hover {
  color: var(--hx-color-primary-700, hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) - 7%)));
  text-decoration: underline;
}

/* Lists inside prose */
.hx-prose :where(ul, ol) { color: var(--text-primary); }
.hx-prose :where(ul li, ol li) { color: var(--text-primary); margin-bottom: 0.5rem; }

/* Tables (content) */
.hx-prose table { color: var(--text-primary); }
.hx-prose :where(th, td) { color: var(--text-primary); border-color: var(--border-color); }

/* Code blocks */
code, pre {
  font-family: 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace;
}

/* Form elements */
input, textarea, select {
  font-family: var(--font-family);
  font-size: var(--font-size-base);
}

/* Do not override Hextra utility text classes globally */

/* Feature cards */
.feature-card p,
.feature-card span,
.feature-card div {
  color: var(--text-primary);
}

/* Navigation */
.nav-link,
.navbar-nav .nav-link {
  color: var(--text-primary);
}

/* Footer */
.footer p,
.footer span,
.footer div {
  color: var(--text-secondary);
}

/* Avoid global catch-all color overrides to preserve theme contrast */

/* Light-mode search dropdown contrast fix */
html:not(.dark) .search-results,
html:not(.dark) .search-results :where(li, a, p, span, div) {
  color: #1f2937 !important; /* gray-800 for readability on white */
}
html:not(.dark) .search-results { background-color: #ffffff; border-color: #e5e7eb; }
html:not(.dark) .search-results a:hover { background-color: rgba(0,0,0,0.03); }

/* Minimal button utility classes for consistent CTAs */
.fr-btn {
  display: inline-block;
  padding: 0.75rem 1.25rem;
  border-radius: 9999px;
  font-weight: 500;
  text-align: center;
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease, transform .2s ease;
}
.fr-btn--primary {
  background-color: var(--hx-color-primary-600, hsl(var(--primary-hue) var(--primary-saturation) var(--primary-lightness)));
  color: #fff;
}
.fr-btn--primary:hover { background-color: var(--hx-color-primary-700, hsl(var(--primary-hue) var(--primary-saturation) calc(var(--primary-lightness) - 7%))); transform: translateY(-1px); }
.fr-btn--secondary {
  background-color: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-primary);
}
.fr-btn--secondary:hover { background-color: rgba(0,0,0,0.03); }
.dark .fr-btn--secondary:hover { background-color: rgba(255,255,255,0.06); }
.fr-btn--ghost {
  background-color: transparent;
  color: var(--hx-color-primary-600, hsl(var(--primary-hue) var(--primary-saturation) var(--primary-lightness)));
}
.fr-btn--ghost:hover { background-color: rgba(0,0,0,0.03); }
.dark .fr-btn--ghost:hover { background-color: rgba(255,255,255,0.06); }

/* CTA compatibility: unify existing theme-styled anchors to fr-btn look */
/* Primary-like anchors using Hextra utility classes */
a.hx\:bg-primary-600,
a.hx\:bg-primary-700,
a.hx\:bg-primary-600.hx\:hover\:bg-primary-700:hover,
a.hx\:bg-primary-600.hx\:focus\:ring-4:focus {
  display: inline-block;
  padding: 0.75rem 1.25rem;
  border-radius: 9999px;
  font-weight: 500;
  text-align: center;
  color: #fff;
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease, transform .2s ease;
}
a.hx\:bg-primary-600:hover,
a.hx\:bg-primary-700:hover { transform: translateY(-1px); }

/* Secondary-like anchors: rounded, padded, no primary bg */
a.hx\:rounded-full.hx\:px-6.hx\:py-3:not([class*="hx:bg-"]) {
  display: inline-block;
  padding: 0.75rem 1.25rem;
  border-radius: 9999px;
  font-weight: 500;
  text-align: center;
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease, transform .2s ease;
}
a.hx\:rounded-full.hx\:px-6.hx\:py-3:not([class*="hx:bg-"]):hover { background-color: rgba(0,0,0,0.03); transform: translateY(-1px); }
.dark a.hx\:rounded-full.hx\:px-6.hx\:py-3:not([class*="hx:bg-"]):hover { background-color: rgba(255,255,255,0.06); }

/* Generic role=button anchors (content/UI) */
a[role="button"] {
  display: inline-block;
  padding: 0.625rem 1rem;
  border-radius: 9999px;
  font-weight: 500;
  text-align: center;
  transition: background-color .2s ease, color .2s ease, transform .2s ease;
}
a[role="button"]:hover { transform: translateY(-1px); }
